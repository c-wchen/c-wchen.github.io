(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{474:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("接受请求准备过程")]),t._v(" "),a("ol",[a("li",[t._v("调用socket函数创建套接字")]),t._v(" "),a("li",[t._v("调用bind函数分配IP地址和端口号")]),t._v(" "),a("li",[t._v("调用listen转为可接受请求状态")]),t._v(" "),a("li",[t._v("调用accept函数受理连接请求")])]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<sys/socket.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("socket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sockfd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stuct sockaddr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("myaddr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("socklen_t")]),t._v(" addrlen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sockfd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" backlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("accept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sockfd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sockaddr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("socklen_t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("addrlen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sockfd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("sockaddr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("serv_addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("socklen_t")]),t._v(" addrlen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"知识点扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识点扩展"}},[t._v("#")]),t._v(" 知识点扩展")]),t._v(" "),a("p",[t._v("操作系统定义的数据类型会添加_t后缀，size_t等陌生的类型都是元数据类型，编译时修改size_t类型，兼容不同的操作系统。")]),t._v(" "),a("p",[t._v("ANSI C标准IO和底层文件IO")]),t._v(" "),a("p",[t._v("POSIX：Portable Operating System Interface 可移植操作系统接口")]),t._v(" "),a("p",[t._v("ANSI：American National Standrads Institute 美国国家标准学会")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("标准I/O")]),t._v(" "),a("th",[t._v("文件I/O")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("带缓冲")]),t._v(" "),a("td",[t._v("无缓冲")])]),t._v(" "),a("tr",[a("td",[t._v("高级磁盘I/O，遵循ANSI C相关标准")]),t._v(" "),a("td",[t._v("低级磁盘I/O，遵循POSIX相关标准")])]),t._v(" "),a("tr",[a("td",[t._v("读写文件时，先读写缓冲区。必要时再访问实际文件，从而减少了系统调用的次数")]),t._v(" "),a("td",[t._v("读写文件时，每次都会执行相关系统调用。能直接读写实际文件，但是增加了系统开销")])]),t._v(" "),a("tr",[a("td",[t._v("用FILE(流)表示一个打开的文件，通常只能访问普通文件")]),t._v(" "),a("td",[t._v("用文件描述符表示一个打开的文件，可访问普通文件、设备文件和管道文件等")])]),t._v(" "),a("tr",[a("td",[t._v("fopen,freopen,fdopen, fclose,getc,fgetc,getchar, fgets,gets,fread,putc,fputc,putchar,fputs,puts,fwrite")]),t._v(" "),a("td",[t._v("open,close,close,write")])])])]),t._v(" "),a("p",[t._v("Window句柄 == Linux文件描述符")])])}),[],!1,null,null,null);s.default=e.exports}}]);