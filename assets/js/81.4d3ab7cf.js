(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{400:function(s,t,a){"use strict";a.r(t);var e=a(13),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"redis是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis是什么"}},[s._v("#")]),s._v(" Redis是什么")]),s._v(" "),a("p",[s._v("Redis（Remote Dictionary Server )，即远程字典服务，是一个开源的使用ANSI "),a("a",{attrs:{href:"https://baike.baidu.com/item/C%E8%AF%AD%E8%A8%80",target:"_blank",rel:"noopener noreferrer"}},[s._v("C语言"),a("OutboundLink")],1),s._v("编写、支持网络、可基于内存亦可持久化的日志型、Key-Value"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93/103728",target:"_blank",rel:"noopener noreferrer"}},[s._v("数据库"),a("OutboundLink")],1),s._v("，并提供多种语言的API。")]),s._v(" "),a("h3",{attrs:{id:"redis功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis功能"}},[s._v("#")]),s._v(" redis功能")]),s._v(" "),a("ol",[a("li",[s._v("内存储存、可选持久化（RDB、AOF）")]),s._v(" "),a("li",[s._v("效率高、用于高速缓存")]),s._v(" "),a("li",[s._v("发布-订阅系统")]),s._v(" "),a("li",[s._v("地图信息分析")]),s._v(" "),a("li",[s._v("计时器、计数器（浏览量）")])]),s._v(" "),a("h3",{attrs:{id:"特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[s._v("#")]),s._v(" 特性")]),s._v(" "),a("ol",[a("li",[s._v("多样的数据类型")]),s._v(" "),a("li",[s._v("持久化")]),s._v(" "),a("li",[s._v("集群")]),s._v(" "),a("li",[s._v("事务")]),s._v(" "),a("li",[s._v("....")])]),s._v(" "),a("h2",{attrs:{id:"基本命令使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本命令使用"}},[s._v("#")]),s._v(" 基本命令使用")]),s._v(" "),a("h3",{attrs:{id:"安装与启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装与启动"}},[s._v("#")]),s._v(" 安装与启动")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis-server\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 启动")]),s._v("\nredis-server\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 客户端访问")]),s._v("\nredis-cli\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 退出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])])]),a("h3",{attrs:{id:"数据库操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库操作"}},[s._v("#")]),s._v(" 数据库操作")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 切换数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" index "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# select 7， 默认存在16个数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 清空当前数据库")]),s._v("\nflushdb\nflushall "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清空所有数据库")]),s._v("\n")])])]),a("h3",{attrs:{id:"基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[s._v("#")]),s._v(" 基本操作")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看数据库中所有键值")]),s._v("\nkeys *\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 设置key-value")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" key name "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# set name chen")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取key-value")]),s._v("\nget key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 是否存在")]),s._v("\nexists key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 移动")]),s._v("\nmove key db\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 删除")]),s._v("\ndel key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 设置key过期时间")]),s._v("\nexpire key "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v("\nttl key "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看key过期时间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取key的类型")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" name\n")])])]),a("h2",{attrs:{id:"redis是单线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis是单线程"}},[s._v("#")]),s._v(" Redis是单线程")]),s._v(" "),a("blockquote",[a("p",[s._v("Redis是单线程， CPU并不是Redis的性能瓶颈，Redis瓶颈是内存和网络带宽")]),s._v(" "),a("ol",[a("li",[s._v("误区1：高性能服务器一定是多线程")]),s._v(" "),a("li",[s._v("误区2： 多线程一定比单线程效率高")])]),s._v(" "),a("p",[s._v("核心： Redis是将所有的数据放在内存中的， 单线程的操作效率是最高的，多线程CPU上下文切换，需要耗时，对于内存系统过来说没有上下文切换的效率是最高的。")])]),s._v(" "),a("h2",{attrs:{id:"redis的基本数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis的基本数据类型"}},[s._v("#")]),s._v(" Redis的基本数据类型")]),s._v(" "),a("p",[s._v("Redis是一种开放源代码（BSD许可）的内存中数据结构存储，用作数据库，缓存和消息代理。它支持数据结构，例如字符串，哈希，列表，集合，带范围查询的排序集合，位图，超日志，带有半径查询和流的地理空间索引。Redis具有内置的复制，Lua脚本，LRU驱逐，事务和不同级别的磁盘持久性，并通过Redis Sentinel和Redis Cluster自动分区提供高可用性。")]),s._v(" "),a("h3",{attrs:{id:"string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[s._v("#")]),s._v(" string")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" key name\nget key name\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 追加字符串")]),s._v("\nappend key value\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 长度")]),s._v("\nstrlen key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 自增和自减")]),s._v("\nincr key \ndecr key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 设置增量")]),s._v("\nincrby key increment\ndecrby key decrement\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 截取字符串")]),s._v("\ngetrange key start end\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 替换")]),s._v("\nsetrange key offset value\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## ")]),s._v("\nsetex "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# （set with expire）设置值和过期时间")]),s._v("\nsetnx "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (set if not exist) 如果存在就不设置")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 批量获取值和设置值")]),s._v("\nmset k "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("v")]),s._v(" k1 v1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nmget k k1 k2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## msetnx|msetex是原子操作")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##特殊命令")]),s._v("\nmset name:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" value "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mset name:10:10 100")]),s._v("\ngetset key value "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先获取再设置")]),s._v("\n")])])]),a("h3",{attrs:{id:"list"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[s._v("#")]),s._v(" list")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 左添加值")]),s._v("\nlpush key v1 v2 v3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpush key v1 v2 v3 ... 右添加")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取值")]),s._v("\nlrange key start end\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取全部值")]),s._v("\nlrange key "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 弹出值")]),s._v("\nlpop "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rpop\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取长度")]),s._v("\nllen key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 移出指定个数指定值")]),s._v("\nlrem key count value\n")])])]),a("blockquote",[a("p",[s._v("消息队列（lpush rpop） 、栈（lpush、lpop）")])]),s._v(" "),a("h3",{attrs:{id:"set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[s._v("#")]),s._v(" set")]),s._v(" "),a("blockquote",[a("p",[s._v("set 中值是不能重复的")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 添加值")]),s._v("\nsadd key v1 v2 v3 v4 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看")]),s._v("\nsmembers key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 是否包含")]),s._v("\nsismember key value\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取长度")]),s._v("\nscard key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 移除")]),s._v("\nsrem key value\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 随机抽取")]),s._v("\nsrandmember key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 数字的交并差")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sdiff")]),s._v(" k1 k2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 差集")]),s._v("\nsinter k1 k2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 交集")]),s._v("\nsunion k1 k2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并集")]),s._v("\n\n")])])]),a("h3",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[s._v("#")]),s._v(" hash")]),s._v(" "),a("blockquote",[a("p",[s._v("map集合、存放map集合,本质上和string类型没有太大的区别，只是一个简单的key-value")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 添加值")]),s._v("\nhset k kk vv "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hset stu name chen")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取值")]),s._v("\nhget k kk\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 获取多个值")]),s._v("\nhmset "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" hmget\n")])])]),a("h3",{attrs:{id:"zset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zset"}},[s._v("#")]),s._v(" zset")]),s._v(" "),a("blockquote",[a("p",[s._v("有序集合")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("zadd key score value\n")])])]),a("h2",{attrs:{id:"三种特殊类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三种特殊类型"}},[s._v("#")]),s._v(" 三种特殊类型")]),s._v(" "),a("h3",{attrs:{id:"geospatial地理位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geospatial地理位置"}},[s._v("#")]),s._v(" geospatial地理位置")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("geoadd key lat lon addr "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 经度 纬度 地点")]),s._v("\ngeopos key addr\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 计算距离")]),s._v("\ngeodist key addr1 addr2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 给精度为中心找到位置")]),s._v("\ngeoradius key lat lon radius unit "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# georadius china 100 100 10000 km")]),s._v("\ngeoradius key lat lon radius unit withcoord count c "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限定查询数量为c")]),s._v("\n\n")])])]),a("h3",{attrs:{id:"hyperloglog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hyperloglog"}},[s._v("#")]),s._v(" hyperloglog")]),s._v(" "),a("blockquote",[a("p",[s._v("什么是基数？ 不重复的元素")]),s._v(" "),a("p",[s._v("应用场景： 网页的UA（一个人网站访问多次，算作一个人）")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pfadd key a b c d e f g \npfcount key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 合并")]),s._v("\npfmerge k1 k2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# k2 -> k1, k2合并到k1")]),s._v("\n\n")])])]),a("h3",{attrs:{id:"bitmaps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bitmaps"}},[s._v("#")]),s._v(" bitmaps")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("setbit key offset value\ngetbit key offset\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 统计操作")]),s._v("\nbitcount key\n")])])]),a("h2",{attrs:{id:"事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务"}},[s._v("#")]),s._v(" 事务")]),s._v(" "),a("p",[s._v("Redis单条命令式保存原子性，但是事务不保证原子性，一个事务中的所有命令都被序列化，在事务执行过程中，按照顺序执行。")]),s._v(" "),a("h3",{attrs:{id:"redis事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis事务"}},[s._v("#")]),s._v(" redis事务")]),s._v(" "),a("ul",[a("li",[s._v("开启事务（multi）")]),s._v(" "),a("li",[s._v("命令入队（...）")]),s._v(" "),a("li",[s._v("执行事务（exec）")]),s._v(" "),a("li",[s._v("取消事务（discard）")])]),s._v(" "),a("h3",{attrs:{id:"异常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[s._v("#")]),s._v(" 异常")]),s._v(" "),a("ol",[a("li",[s._v("编译时一场：命令错误")]),s._v(" "),a("li",[s._v("运行时异常")])]),s._v(" "),a("h3",{attrs:{id:"锁机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#锁机制"}},[s._v("#")]),s._v(" 锁机制")]),s._v(" "),a("ol",[a("li",[s._v("悲观者：认为任何时候都会有问题，无论做什么都会加锁")]),s._v(" "),a("li",[s._v("乐观锁： 认为什么时候都不会出问题，所以不会上锁，更新数据会判断一下， 在此期间是否有人修改过这个数据")])]),s._v(" "),a("h3",{attrs:{id:"监视"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监视"}},[s._v("#")]),s._v(" 监视")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" key\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 更新使用乐观锁检查")]),s._v("\nunwatch "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解锁")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);