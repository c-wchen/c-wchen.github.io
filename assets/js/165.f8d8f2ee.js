(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{503:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("SSH调用远程命令")]),s._v(" "),t("p",[s._v("如何让一条命令调用Linux服务器命令，又或者本地有一个脚本，不复制到远程的前提下在远程去执行。")]),s._v(" "),t("h2",{attrs:{id:"_1-执行远程命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-执行远程命令"}},[s._v("#")]),s._v(" 1. 执行远程命令")]),s._v(" "),t("p",[s._v("在连接SSH的基础上调用命令，命令不会去分配"),t("code",[s._v("TTY")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ssh root@192.168.2.43 "ls -al /"\n')])])]),t("h2",{attrs:{id:"_2-交互命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-交互命令"}},[s._v("#")]),s._v(" 2. 交互命令")]),s._v(" "),t("p",[s._v("执行动态交互的命令如何去执行")]),s._v(" "),t("div",{staticClass:"language-.bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ssh root@192.168.2.43 "top"\n')])])]),t("blockquote",[t("p",[s._v("出现错误"),t("code",[s._v("TERM environment variable not set.")]),s._v("\n默认情况下，不带命令的 ssh 连接时，会为你分配一个 TTY。因为此时你应该是想要运行一个 shell 会话。\n但是当你通过 ssh 在远程主机上执行命令时，并不会为这个远程会话分配 TTY。此时 ssh 会立即退出远程主机，所以需要交互的命令也随之结束")])]),s._v(" "),t("p",[s._v("正确执行方式")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -t root@192.168.2.43 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"top"')]),s._v("\n")])])]),t("h2",{attrs:{id:"_3-执行脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-执行脚本"}},[s._v("#")]),s._v(" 3. 执行脚本")]),s._v(" "),t("ul",[t("li",[s._v("本地脚本")])]),s._v(" "),t("div",{staticClass:"language-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[s._v(" ssh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t root@"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".43")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("param1 param2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("ul",[t("li",[s._v("远程脚本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -t root@192.168.2.43 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test.sh [param1 param2]"')]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);