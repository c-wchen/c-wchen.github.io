(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{266:function(s,a,t){s.exports=t.p+"assets/img/image-20201124123528763.3909f370.png"},267:function(s,a,t){s.exports=t.p+"assets/img/image-20201124123622049.0a2c5a9b.png"},268:function(s,a,t){s.exports=t.p+"assets/img/image-20201124130442077.619fab7d.png"},397:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis高级部分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis高级部分"}},[s._v("#")]),s._v(" Redis高级部分")]),s._v(" "),e("h2",{attrs:{id:"redis持久化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis持久化"}},[s._v("#")]),s._v(" Redis持久化")]),s._v(" "),e("h3",{attrs:{id:"rdb模式-redis-database"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rdb模式-redis-database"}},[s._v("#")]),s._v(" RDB模式(Redis Database)")]),s._v(" "),e("p",[e("img",{attrs:{src:t(266),alt:"image-20201124123528763"}})]),s._v(" "),e("h4",{attrs:{id:"触发规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#触发规则"}},[s._v("#")]),s._v(" 触发规则")]),s._v(" "),e("ol",[e("li",[s._v("save规则满足情况下， 会自动触发")]),s._v(" "),e("li",[s._v("执行flushall命令的时候也会触发rdb规则")]),s._v(" "),e("li",[s._v("退出redis也会产生rdb文件")])]),s._v(" "),e("h4",{attrs:{id:"恢复文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#恢复文件"}},[s._v("#")]),s._v(" 恢复文件")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("只需要吧rdb文件放在redis启动目录，redis启动会自动检查dump.rdb其中的数据")])]),s._v(" "),e("li",[e("p",[s._v("查看需要存放的位置")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("xxx.xxx.xxx.xxx:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" config get "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dir"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/redis"')]),s._v("\n")])])])])]),s._v(" "),e("h3",{attrs:{id:"aof模式-append-only-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aof模式-append-only-file"}},[s._v("#")]),s._v(" AOF模式(Append Only File)")]),s._v(" "),e("p",[e("img",{attrs:{src:t(267),alt:"image-20201124123622049"}})]),s._v(" "),e("blockquote",[e("p",[s._v("注意默认是不开启AOF模式（appendonly no），需要手动进行开启")])]),s._v(" "),e("h4",{attrs:{id:"优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[s._v("#")]),s._v(" 优点")]),s._v(" "),e("ol",[e("li",[s._v("每一次都会动图，文件的完整性会更好")]),s._v(" "),e("li",[s._v("每秒都会同步一次，可能丢失1s的数据")]),s._v(" "),e("li",[s._v("从不同步效率最高")])]),s._v(" "),e("h4",{attrs:{id:"缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[s._v("#")]),s._v(" 缺点")]),s._v(" "),e("ol",[e("li",[s._v("相对数据文件来说，AOF的远远大于RDB， 修复速度也比RDB慢")]),s._v(" "),e("li",[s._v("AOF的运行效率比RDB慢，所以Redis的默认的配置RDB")])]),s._v(" "),e("h2",{attrs:{id:"redis发布订阅"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis发布订阅"}},[s._v("#")]),s._v(" Redis发布订阅")]),s._v(" "),e("p",[s._v("Redis发布订阅（pub/sub）是一种消息通信模式：发送者（pub）发送消息， 订阅者（sub）接受消息")]),s._v(" "),e("p",[e("img",{attrs:{src:t(268),alt:"image-20201124130442077"}})]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("publish channel message "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 发布消息")]),s._v("\nsubscribe channel       "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 订阅消息")]),s._v("\n")])])]),e("h2",{attrs:{id:"redis主从复制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis主从复制"}},[s._v("#")]),s._v(" Redis主从复制")]),s._v(" "),e("h3",{attrs:{id:"单机-修改配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单机-修改配置"}},[s._v("#")]),s._v(" （单机）修改配置")]),s._v(" "),e("ol",[e("li",[s._v("端口")]),s._v(" "),e("li",[s._v("日志文件")]),s._v(" "),e("li",[s._v("dump.rdb文件名")])]),s._v(" "),e("h3",{attrs:{id:"配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 6379节点")]),s._v("\nport "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\nlogfile /var/log/redis/redis-server6379.log\ndbfilename dump6379.rdb\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 6380")]),s._v("\nport "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\nlogfile /var/log/redis/redis-server6380.log\ndbfilename dump6380.rdb\n\nport "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\nlogfile /var/log/redis/redis-server6381.log\ndbfilename dump6381.rdb\n")])])]),e("h3",{attrs:{id:"启动与配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动与配置"}},[s._v("#")]),s._v(" 启动与配置")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 启动")]),s._v("\nredis-server ~/redis6379.conf\nredis-server ~/redis6380.conf\nredis-server ~/redis6381.conf\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 节点配置")]),s._v("\ninfo replication   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 节点信息")]),s._v("\nslaveof "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" port  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 从节点设置主节点，临时")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 永久配置，从节点配置文件")]),s._v("\nreplicaof "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])])]),e("h2",{attrs:{id:"哨兵模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#哨兵模式"}},[s._v("#")]),s._v(" 哨兵模式")]),s._v(" "),e("blockquote",[e("p",[s._v("没有详细内容，比较重要")])]),s._v(" "),e("h2",{attrs:{id:"redis缓存穿透和雪崩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis缓存穿透和雪崩"}},[s._v("#")]),s._v(" Redis缓存穿透和雪崩")])])}),[],!1,null,null,null);a.default=r.exports}}]);