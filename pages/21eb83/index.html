<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>bytecode | wchen</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon32.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="record wchen life">
    
    <link rel="preload" href="/assets/css/0.styles.1b049d26.css" as="style"><link rel="preload" href="/assets/js/app.8725beb4.js" as="script"><link rel="preload" href="/assets/js/3.aedd7e52.js" as="script"><link rel="preload" href="/assets/js/23.b9d1dc53.js" as="script"><link rel="prefetch" href="/assets/js/10.0c89a17c.js"><link rel="prefetch" href="/assets/js/100.22e21bad.js"><link rel="prefetch" href="/assets/js/101.b1169e57.js"><link rel="prefetch" href="/assets/js/102.90fd103e.js"><link rel="prefetch" href="/assets/js/103.14e89f5b.js"><link rel="prefetch" href="/assets/js/104.06fc5cca.js"><link rel="prefetch" href="/assets/js/105.8f69f715.js"><link rel="prefetch" href="/assets/js/106.d8c27197.js"><link rel="prefetch" href="/assets/js/107.b7d9f2cb.js"><link rel="prefetch" href="/assets/js/108.c49c77b1.js"><link rel="prefetch" href="/assets/js/109.9a1afbcb.js"><link rel="prefetch" href="/assets/js/11.88339590.js"><link rel="prefetch" href="/assets/js/110.b30e3a13.js"><link rel="prefetch" href="/assets/js/111.5d2cf182.js"><link rel="prefetch" href="/assets/js/112.9538f788.js"><link rel="prefetch" href="/assets/js/113.14a4e516.js"><link rel="prefetch" href="/assets/js/114.ab126092.js"><link rel="prefetch" href="/assets/js/115.be4bb57a.js"><link rel="prefetch" href="/assets/js/116.8dbb3f7b.js"><link rel="prefetch" href="/assets/js/117.61931609.js"><link rel="prefetch" href="/assets/js/118.85d90fa0.js"><link rel="prefetch" href="/assets/js/119.7a0561c5.js"><link rel="prefetch" href="/assets/js/12.0e4adb62.js"><link rel="prefetch" href="/assets/js/120.b92e0bc3.js"><link rel="prefetch" href="/assets/js/121.fc43e8ef.js"><link rel="prefetch" href="/assets/js/122.d7b06645.js"><link rel="prefetch" href="/assets/js/123.43ddeb68.js"><link rel="prefetch" href="/assets/js/124.f5a25533.js"><link rel="prefetch" href="/assets/js/125.d6917ebb.js"><link rel="prefetch" href="/assets/js/126.87e25558.js"><link rel="prefetch" href="/assets/js/127.d93c3bd6.js"><link rel="prefetch" href="/assets/js/128.cd9c0723.js"><link rel="prefetch" href="/assets/js/129.4bf55679.js"><link rel="prefetch" href="/assets/js/13.cb32d651.js"><link rel="prefetch" href="/assets/js/130.80b8ac9f.js"><link rel="prefetch" href="/assets/js/131.0a13ecc2.js"><link rel="prefetch" href="/assets/js/132.cec6971c.js"><link rel="prefetch" href="/assets/js/133.4de9fe57.js"><link rel="prefetch" href="/assets/js/134.d064d2f1.js"><link rel="prefetch" href="/assets/js/135.4cbf9da8.js"><link rel="prefetch" href="/assets/js/136.2519514e.js"><link rel="prefetch" href="/assets/js/137.5c285a55.js"><link rel="prefetch" href="/assets/js/138.b5c8fa36.js"><link rel="prefetch" href="/assets/js/139.28679ddc.js"><link rel="prefetch" href="/assets/js/14.5290b05d.js"><link rel="prefetch" href="/assets/js/140.85bde7a0.js"><link rel="prefetch" href="/assets/js/141.aeb8f686.js"><link rel="prefetch" href="/assets/js/142.0e821bf5.js"><link rel="prefetch" href="/assets/js/143.bea7f5c7.js"><link rel="prefetch" href="/assets/js/144.c23cb250.js"><link rel="prefetch" href="/assets/js/145.df7c1e3e.js"><link rel="prefetch" href="/assets/js/146.5180b016.js"><link rel="prefetch" href="/assets/js/147.2a32ede1.js"><link rel="prefetch" href="/assets/js/148.62832aa8.js"><link rel="prefetch" href="/assets/js/149.cdd397e9.js"><link rel="prefetch" href="/assets/js/15.376e4dca.js"><link rel="prefetch" href="/assets/js/150.591bc885.js"><link rel="prefetch" href="/assets/js/151.4bfbd80d.js"><link rel="prefetch" href="/assets/js/152.ed8603a3.js"><link rel="prefetch" href="/assets/js/153.541b2013.js"><link rel="prefetch" href="/assets/js/154.b4f1a312.js"><link rel="prefetch" href="/assets/js/155.d20dc730.js"><link rel="prefetch" href="/assets/js/156.0db8687c.js"><link rel="prefetch" href="/assets/js/157.68037974.js"><link rel="prefetch" href="/assets/js/158.29f9cfec.js"><link rel="prefetch" href="/assets/js/159.c318c6c0.js"><link rel="prefetch" href="/assets/js/16.e6fd44a3.js"><link rel="prefetch" href="/assets/js/160.5b6bb350.js"><link rel="prefetch" href="/assets/js/161.8a804971.js"><link rel="prefetch" href="/assets/js/162.2e1df994.js"><link rel="prefetch" href="/assets/js/163.87a2b4b7.js"><link rel="prefetch" href="/assets/js/164.f8c7dc6a.js"><link rel="prefetch" href="/assets/js/165.f8d8f2ee.js"><link rel="prefetch" href="/assets/js/166.ea9c7e6b.js"><link rel="prefetch" href="/assets/js/167.8a5394d8.js"><link rel="prefetch" href="/assets/js/168.44858922.js"><link rel="prefetch" href="/assets/js/169.7a4c83f9.js"><link rel="prefetch" href="/assets/js/17.8b54be9f.js"><link rel="prefetch" href="/assets/js/170.08fdf9e1.js"><link rel="prefetch" href="/assets/js/171.c3706a48.js"><link rel="prefetch" href="/assets/js/172.4a59fe97.js"><link rel="prefetch" href="/assets/js/173.18b82370.js"><link rel="prefetch" href="/assets/js/174.9d674ed8.js"><link rel="prefetch" href="/assets/js/175.cc6ad8f7.js"><link rel="prefetch" href="/assets/js/176.4794a561.js"><link rel="prefetch" href="/assets/js/177.0dc3d05a.js"><link rel="prefetch" href="/assets/js/178.88084643.js"><link rel="prefetch" href="/assets/js/179.c44b918c.js"><link rel="prefetch" href="/assets/js/18.92f98bc1.js"><link rel="prefetch" href="/assets/js/180.7d19ae5a.js"><link rel="prefetch" href="/assets/js/181.a204908e.js"><link rel="prefetch" href="/assets/js/182.5db8323f.js"><link rel="prefetch" href="/assets/js/183.fbedeba3.js"><link rel="prefetch" href="/assets/js/184.df5c0632.js"><link rel="prefetch" href="/assets/js/185.978c670d.js"><link rel="prefetch" href="/assets/js/186.98f653b8.js"><link rel="prefetch" href="/assets/js/187.b2fe7440.js"><link rel="prefetch" href="/assets/js/188.5c4b8dea.js"><link rel="prefetch" href="/assets/js/189.1628eee4.js"><link rel="prefetch" href="/assets/js/19.25548c65.js"><link rel="prefetch" href="/assets/js/190.75dac6e5.js"><link rel="prefetch" href="/assets/js/191.e5701c49.js"><link rel="prefetch" href="/assets/js/192.bb4edece.js"><link rel="prefetch" href="/assets/js/193.1899fbaa.js"><link rel="prefetch" href="/assets/js/194.49d5dabc.js"><link rel="prefetch" href="/assets/js/195.a4cdc959.js"><link rel="prefetch" href="/assets/js/196.f068ee8d.js"><link rel="prefetch" href="/assets/js/197.692fe19f.js"><link rel="prefetch" href="/assets/js/198.d4131506.js"><link rel="prefetch" href="/assets/js/199.57d7a3e3.js"><link rel="prefetch" href="/assets/js/2.666a315c.js"><link rel="prefetch" href="/assets/js/20.773677e4.js"><link rel="prefetch" href="/assets/js/200.23cc8cf1.js"><link rel="prefetch" href="/assets/js/201.cec5b858.js"><link rel="prefetch" href="/assets/js/202.4414fac2.js"><link rel="prefetch" href="/assets/js/21.eebcf8a1.js"><link rel="prefetch" href="/assets/js/22.ab9c1367.js"><link rel="prefetch" href="/assets/js/24.4b69923e.js"><link rel="prefetch" href="/assets/js/25.a2fe8495.js"><link rel="prefetch" href="/assets/js/26.12dcf15f.js"><link rel="prefetch" href="/assets/js/27.50073f77.js"><link rel="prefetch" href="/assets/js/28.6c68578f.js"><link rel="prefetch" href="/assets/js/29.6a0419af.js"><link rel="prefetch" href="/assets/js/30.8ed6c08d.js"><link rel="prefetch" href="/assets/js/31.301bd566.js"><link rel="prefetch" href="/assets/js/32.851bfc08.js"><link rel="prefetch" href="/assets/js/33.5d350a8c.js"><link rel="prefetch" href="/assets/js/34.ca33f595.js"><link rel="prefetch" href="/assets/js/35.983ed47a.js"><link rel="prefetch" href="/assets/js/36.9b868e72.js"><link rel="prefetch" href="/assets/js/37.449945ce.js"><link rel="prefetch" href="/assets/js/38.ef4a02f1.js"><link rel="prefetch" href="/assets/js/39.ef74d5c7.js"><link rel="prefetch" href="/assets/js/4.017bf609.js"><link rel="prefetch" href="/assets/js/40.1efa2972.js"><link rel="prefetch" href="/assets/js/41.4c4e85b4.js"><link rel="prefetch" href="/assets/js/42.8eb9f6c6.js"><link rel="prefetch" href="/assets/js/43.3a538c76.js"><link rel="prefetch" href="/assets/js/44.ac957ce4.js"><link rel="prefetch" href="/assets/js/45.20df3feb.js"><link rel="prefetch" href="/assets/js/46.104c8407.js"><link rel="prefetch" href="/assets/js/47.ed9bd1f1.js"><link rel="prefetch" href="/assets/js/48.d6e9908f.js"><link rel="prefetch" href="/assets/js/49.acd27e73.js"><link rel="prefetch" href="/assets/js/5.ef717c93.js"><link rel="prefetch" href="/assets/js/50.f6436ebc.js"><link rel="prefetch" href="/assets/js/51.4482ba40.js"><link rel="prefetch" href="/assets/js/52.15810626.js"><link rel="prefetch" href="/assets/js/53.8cc86e5d.js"><link rel="prefetch" href="/assets/js/54.fcf6b400.js"><link rel="prefetch" href="/assets/js/55.cf5d0b5a.js"><link rel="prefetch" href="/assets/js/56.d21b4a30.js"><link rel="prefetch" href="/assets/js/57.09227c2a.js"><link rel="prefetch" href="/assets/js/58.fe436573.js"><link rel="prefetch" href="/assets/js/59.016fbcaf.js"><link rel="prefetch" href="/assets/js/6.96ee5f57.js"><link rel="prefetch" href="/assets/js/60.c06293ac.js"><link rel="prefetch" href="/assets/js/61.b4e4006c.js"><link rel="prefetch" href="/assets/js/62.f5a124d5.js"><link rel="prefetch" href="/assets/js/63.2f0bed93.js"><link rel="prefetch" href="/assets/js/64.392c4569.js"><link rel="prefetch" href="/assets/js/65.7461790c.js"><link rel="prefetch" href="/assets/js/66.467fe75c.js"><link rel="prefetch" href="/assets/js/67.7472ff41.js"><link rel="prefetch" href="/assets/js/68.cfff64e0.js"><link rel="prefetch" href="/assets/js/69.92e93051.js"><link rel="prefetch" href="/assets/js/7.e6472673.js"><link rel="prefetch" href="/assets/js/70.63ff8004.js"><link rel="prefetch" href="/assets/js/71.2cc00e12.js"><link rel="prefetch" href="/assets/js/72.860d4af9.js"><link rel="prefetch" href="/assets/js/73.9d0bd3ea.js"><link rel="prefetch" href="/assets/js/74.237893f9.js"><link rel="prefetch" href="/assets/js/75.2f7650a9.js"><link rel="prefetch" href="/assets/js/76.19d4c2c8.js"><link rel="prefetch" href="/assets/js/77.f78144da.js"><link rel="prefetch" href="/assets/js/78.e0f85041.js"><link rel="prefetch" href="/assets/js/79.f1f92723.js"><link rel="prefetch" href="/assets/js/8.a8081b4b.js"><link rel="prefetch" href="/assets/js/80.9bf52d8e.js"><link rel="prefetch" href="/assets/js/81.4d3ab7cf.js"><link rel="prefetch" href="/assets/js/82.0370835e.js"><link rel="prefetch" href="/assets/js/83.0ed1bb1f.js"><link rel="prefetch" href="/assets/js/84.cc2f8d66.js"><link rel="prefetch" href="/assets/js/85.75d5f5b3.js"><link rel="prefetch" href="/assets/js/86.65af641f.js"><link rel="prefetch" href="/assets/js/87.15f2ea85.js"><link rel="prefetch" href="/assets/js/88.e59ddda6.js"><link rel="prefetch" href="/assets/js/89.a05edea4.js"><link rel="prefetch" href="/assets/js/9.c9619e92.js"><link rel="prefetch" href="/assets/js/90.441e1039.js"><link rel="prefetch" href="/assets/js/91.8adf4b04.js"><link rel="prefetch" href="/assets/js/92.46ae5eb4.js"><link rel="prefetch" href="/assets/js/93.c1c42ffc.js"><link rel="prefetch" href="/assets/js/94.1de7aab9.js"><link rel="prefetch" href="/assets/js/95.54f28122.js"><link rel="prefetch" href="/assets/js/96.a9b78971.js"><link rel="prefetch" href="/assets/js/97.4c1f5ec9.js"><link rel="prefetch" href="/assets/js/98.6c42b155.js"><link rel="prefetch" href="/assets/js/99.cddae8d9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1b049d26.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="app"><div class="header" data-v-42c3136f><span class="logo" data-v-42c3136f>wchen</span> <div class="search-box" data-v-42c3136f><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="main"><div class="sidebar" data-v-3ad4446e><ul class="sub-1" data-v-3ad4446e><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                C
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                Git
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                algorithm
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                backend
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                linux
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                network
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                python
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                storage
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                tools
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                web
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                README.md
            </span> <!----></li></ul></div> <div class="content__default"><p>查看java编译后字节码， <code>javac ClassName.java &amp;&amp; javap -v -p ClassName</code>, 通过vim打开字节码文件通过底部命令<code>:%!xxd</code>以十六进制查看文件</p> <p><img src="/assets/img/image-20200822154814701.ed554036.png" alt="image-20200822154814701"></p> <p>第一个<code>cafe babe</code>表示魔数， <code>0000 0034</code>表示此版本号（minor version）、 主版本（major version）（java命令会通过查看版本和虚本地java环境对比， 如果class版本大于当前环境会抛出错误<code>UnsupportedClassVersionError</code>）， 版本对照表如下</p> <table><thead><tr><th>JDK version</th> <th>major</th> <th>minor</th></tr></thead> <tbody><tr><td>1.6</td> <td>50</td> <td>0</td></tr> <tr><td>1.7</td> <td>51</td> <td>0</td></tr> <tr><td>1.8</td> <td>52</td> <td>0</td></tr></tbody></table> <h3 id="常量池constant-pool"><a href="#常量池constant-pool" class="header-anchor">#</a> 常量池Constant pool</h3> <p>常量池中主要存放两大类常量：字面量（<code>Literal</code>）和符号引用（<code>Symbolic References</code>）</p> <ul><li>字面量比较接近于Java语言层面的常量概念，如文本字符串、声明为final的常量值等。</li> <li>而符号引用则属于编译原理方面的概念，包括了下面三类常量：
<ul><li>类和接口的全限定名（<code>Fully Qualified Name</code>）</li> <li>字段的名称和描述符（<code>Descriptor</code>）</li> <li>方法的名称和描述符</li></ul></li></ul> <p>常量池的总体结构</p> <p>常量池主要由<strong>常量池数量</strong>与<strong>常量池数组</strong>这两部分共同组成。<strong>常量池数量紧跟在主版本号后面</strong>，占据2个字节（<code>u2</code>类型数据）；<strong>常量池数组则紧跟在常量池数量之后</strong>。</p> <p>注意： 常量池数组中的元素个数=常量池数-1（其中0暂时不使用），索引为0也是一个常量（保留常量），只不过它不位于常量表中，这个常量就对应<code>null</code>值；所以，常量池的索引从1开始而非0开始。</p> <p><img src="/assets/img/v2-ce5f1949e23b8e0f44d612765657e7b5_r.b36c6771.jpg" alt="img"></p> <p>其中 <code>CONSTANT_Utf8_info</code> 类型的常量，它的 <code>length</code> 值说明了这个 UTF-8 编码的字符串长度是多少字节，<code>bytes</code> 的值为长度为 <code>length</code> 字节的 UTF-8 缩略编码表示的字符串</p> <p><em>由于 Class 文件中方法、字段等都需要引用 <code>CONSTANT_Utf8_info</code> 型常量来描述名称，所以 <code>CONSTANT_Utf8_info</code> 型常量的最大长度也就是 Java 中方法、字段名的最大长度，即 <code>u2</code> 的 65535，也就是说最大 65535 字节，即 64KB。</em></p> <p>Compile.java</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Compile</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Compile</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Compile</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;chen&quot;</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">Compile</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>使用命令</p> <blockquote><p>javac Comile.java</p></blockquote> <blockquote><p>javap -v -p  Compile&gt; Compile.txt</p></blockquote> <p>Compile.txt</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Classfile /D:/Documents/WorkSpace/jcompile/Compile.class
  Last modified <span class="token number">2020</span>-8-24<span class="token punctuation">;</span> size <span class="token number">458</span> bytes
  MD5 checksum ef1ad2e7f4150d13fd7ee59bae827a79
  Compiled from <span class="token string">&quot;Compile.java&quot;</span>
public class Compile
  minor version: <span class="token number">0</span>
  major version: <span class="token number">52</span>
  flags: ACC_PUBLIC, ACC_SUPER
Constant pool:
   <span class="token comment">#1 = Methodref          #8.#18         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
   <span class="token comment">#2 = Class              #19            // Compile</span>
   <span class="token comment">#3 = Methodref          #2.#18         // Compile.&quot;&lt;init&gt;&quot;:()V</span>
   <span class="token comment">#4 = String             #20            // chen</span>
   <span class="token comment">#5 = Fieldref           #2.#21         // Compile.name:Ljava/lang/String;</span>
   <span class="token comment">#6 = Fieldref           #22.#23        // java/lang/System.out:Ljava/io/PrintStream;</span>
   <span class="token comment">#7 = Methodref          #24.#25        // java/io/PrintStream.print:(Ljava/lang/String;)V</span>
   <span class="token comment">#8 = Class              #26            // java/lang/Object</span>
   <span class="token comment">#9 = Utf8               name</span>
  <span class="token comment">#10 = Utf8               Ljava/lang/String;</span>
  <span class="token comment">#11 = Utf8               &lt;init&gt;</span>
  <span class="token comment">#12 = Utf8               ()V</span>
  <span class="token comment">#13 = Utf8               Code</span>
  <span class="token comment">#14 = Utf8               LineNumberTable</span>
  <span class="token comment">#15 = Utf8               main</span>
  <span class="token comment">#16 = Utf8               SourceFile</span>
  <span class="token comment">#17 = Utf8               Compile.java</span>
  <span class="token comment">#18 = NameAndType        #11:#12        // &quot;&lt;init&gt;&quot;:()V</span>
  <span class="token comment">#19 = Utf8               Compile</span>
  <span class="token comment">#20 = Utf8               chen</span>
  <span class="token comment">#21 = NameAndType        #9:#10         // name:Ljava/lang/String;</span>
  <span class="token comment">#22 = Class              #27            // java/lang/System</span>
  <span class="token comment">#23 = NameAndType        #28:#29        // out:Ljava/io/PrintStream;</span>
  <span class="token comment">#24 = Class              #30            // java/io/PrintStream</span>
  <span class="token comment">#25 = NameAndType        #31:#32        // print:(Ljava/lang/String;)V</span>
  <span class="token comment">#26 = Utf8               java/lang/Object</span>
  <span class="token comment">#27 = Utf8               java/lang/System</span>
  <span class="token comment">#28 = Utf8               out</span>
  <span class="token comment">#29 = Utf8               Ljava/io/PrintStream;</span>
  <span class="token comment">#30 = Utf8               java/io/PrintStream</span>
  <span class="token comment">#31 = Utf8               print</span>
  <span class="token comment">#32 = Utf8               (Ljava/lang/String;)V</span>
<span class="token punctuation">{</span>
  public static java.lang.String name<span class="token punctuation">;</span>
    descriptor: Ljava/lang/String<span class="token punctuation">;</span>
    flags: ACC_PUBLIC, ACC_STATIC

  public Compile<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    descriptor: <span class="token punctuation">(</span><span class="token punctuation">)</span>V
    flags: ACC_PUBLIC
    Code:
      <span class="token assign-left variable">stack</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">locals</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">args_size</span><span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span>: aload_0
         <span class="token number">1</span>: invokespecial <span class="token comment">#1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="token number">4</span>: <span class="token builtin class-name">return</span>
      LineNumberTable:
        line <span class="token number">1</span>: <span class="token number">0</span>

  public static void main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    descriptor: <span class="token punctuation">(</span><span class="token punctuation">)</span>V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      <span class="token assign-left variable">stack</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">locals</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">args_size</span><span class="token operator">=</span><span class="token number">0</span>
         <span class="token number">0</span>: new           <span class="token comment">#2                  // class Compile</span>
         <span class="token number">3</span>: dup
         <span class="token number">4</span>: invokespecial <span class="token comment">#3                  // Method &quot;&lt;init&gt;&quot;:()V</span>
         <span class="token number">7</span>: astore_0
         <span class="token number">8</span>: ldc           <span class="token comment">#4                  // String chen</span>
        <span class="token number">10</span>: putstatic     <span class="token comment">#5                  // Field name:Ljava/lang/String;</span>
        <span class="token number">13</span>: getstatic     <span class="token comment">#6                  // Field java/lang/System.out:Ljava/io/PrintStream;</span>
        <span class="token number">16</span>: getstatic     <span class="token comment">#5                  // Field name:Ljava/lang/String;</span>
        <span class="token number">19</span>: invokevirtual <span class="token comment">#7                  // Method java/io/PrintStream.print:(Ljava/lang/String;)V</span>
        <span class="token number">22</span>: <span class="token builtin class-name">return</span>
      LineNumberTable:
        line <span class="token number">4</span>: <span class="token number">0</span>
        line <span class="token number">5</span>: <span class="token number">8</span>
        line <span class="token number">6</span>: <span class="token number">13</span>
        line <span class="token number">7</span>: <span class="token number">22</span>
<span class="token punctuation">}</span>
SourceFile: <span class="token string">&quot;Compile.java&quot;</span>

</code></pre></div><p>以十六进制查看Compile.class</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cafe babe 0000 0034 0021 0a00 0800 <span class="token number">1207</span>
0013 0a00 0200 <span class="token number">1208</span> 0014 0900 0200 <span class="token number">1509</span>
0016 0017 0a00 <span class="token number">1800</span> <span class="token number">1907</span> 001a 0100 046e
616d <span class="token number">6501</span> 0012 4c6a <span class="token number">6176</span> 612f 6c61 6e67
2f53 <span class="token number">7472</span> 696e 673b 0100 063c 696e <span class="token number">6974</span>
3e01 0003 <span class="token number">2829</span> <span class="token number">5601</span> 0004 436f <span class="token number">6465</span> 0100
0f4c 696e 654e 756d <span class="token number">6265</span> <span class="token number">7254</span> <span class="token number">6162</span> 6c65
0100 046d <span class="token number">6169</span> 6e01 000a 536f <span class="token number">7572</span> <span class="token number">6365</span>
<span class="token number">4669</span> 6c65 0100 0c43 6f6d <span class="token number">7069</span> 6c65 2e6a
<span class="token number">6176</span> 610c 000b 000c 0100 0743 6f6d <span class="token number">7069</span>
6c65 0100 0463 <span class="token number">6865</span> 6e0c 0009 000a 0700
1b0c 001c 001d 0700 1e0c 001f 0020 0100
106a <span class="token number">6176</span> 612f 6c61 6e67 2f4f 626a <span class="token number">6563</span>
<span class="token number">7401</span> 0010 6a61 <span class="token number">7661</span> 2f6c 616e 672f <span class="token number">5379</span>
<span class="token number">7374</span> 656d 0100 036f <span class="token number">7574</span> 0100 154c 6a61
<span class="token number">7661</span> 2f69 6f2f <span class="token number">5072</span> 696e <span class="token number">7453</span> <span class="token number">7472</span> <span class="token number">6561</span>
6d3b 0100 136a <span class="token number">6176</span> 612f 696f 2f50 <span class="token number">7269</span>
6e74 <span class="token number">5374</span> <span class="token number">7265</span> 616d 0100 0570 <span class="token number">7269</span> 6e74
0100 <span class="token number">1528</span> 4c6a <span class="token number">6176</span> 612f 6c61 6e67 2f53
<span class="token number">7472</span> 696e 673b <span class="token number">2956</span> 0021 0002 0008 0000
0001 0009 0009 000a 0000 0002 0001 000b
000c 0001 000d 0000 001d 0001 0001 0000
0005 2ab7 0001 b100 0000 0100 0e00 0000
0600 0100 0000 0100 0900 0f00 0c00 0100
0d00 0000 3b00 0200 0100 0000 17bb 0002
59b7 0003 4b12 04b3 0005 b200 06b2 0005
b600 07b1 0000 0001 000e 0000 0012 0004
0000 0004 0008 0005 000d 0006 0016 0007
0001 0010 0000 0002 0011
</code></pre></div><p>分部解释</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cafe babe 魔数
0000 0034 此版本、 主版本  <span class="token assign-left variable">52</span><span class="token operator">=</span><span class="token operator">&gt;</span>jdk1.8
0021 常量池大小  0021 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span>-32  （除零）
 


序号    指令     值
<span class="token comment">#1  	0a  	0008 0012 </span>
<span class="token comment">#2  	07  	0013</span>
<span class="token comment">#3  	0a  	0002 0012</span>
<span class="token comment">#4  	08  	0014</span>
<span class="token comment">#5  	09  	0002 0015</span>
<span class="token comment">#6  	09  	0016 0017</span>
<span class="token comment">#7  	0a  	0018 0019</span>
<span class="token comment">#8  	07  	001a </span>
<span class="token comment">#9  	01  	0004 6e61 6d65</span>
<span class="token comment">#10 	01  	0012 4c6a 6176 612f 6c61 6e67 2f53 7472 696e 673b  //Ljava/lang/String;</span>
<span class="token comment">#11 	01  	0006 3c69 6e69 743e  //&lt;init&gt;</span>
<span class="token comment">#12 	01  	0003 2829 56         //()V  </span>
<span class="token comment">#13 	01  	0004 436f 6465       //Code</span>
<span class="token comment">#14 	01  	000f 4c69 6e65 4e75 6d62 6572 5461 626c 65 //LineNumberTable</span>
<span class="token comment">#15 	01  	0004 6d61 696e  //main</span>
<span class="token comment">#16 	01  	000a 536f 7572 6365 4669 6c65  //SourceFile</span>
<span class="token comment">#17 	01  	000c 436f 6d70 696c 652e 6a61 7661 //Compile.java</span>
<span class="token comment">#18 	0c  	000b 000c </span>
<span class="token comment">#19 	01  	0007 436f 6d70 696c 65 //Compile</span>
<span class="token comment">#20 	01  	0004 6368 656e  //chen</span>
<span class="token comment">#21 	0c  	0009 000a </span>
<span class="token comment">#22 	07  	001b</span>
<span class="token comment">#23 	0c  	001c 001d</span>
<span class="token comment">#24 	07  	001e</span>
<span class="token comment">#25 	0c  	001f 0020</span>
<span class="token comment">#26 	01  	0010 6a61 7661 2f6c 616e 672f 4f62 6a65 6374 //java/lang/Object</span>
<span class="token comment">#27 	01  	0010 6a61 7661 2f6c 616e 672f 5379 7374 656d //java/lang/System</span>
<span class="token comment">#28 	01  	0003 6f75 74  //out</span>
<span class="token comment">#29 	01  	0015 4c6a 6176 612f 696f 2f50 7269 6e74 5374 7265 616d 3b //Ljava/io/PrintStream;</span>
<span class="token comment">#30 	01  	0013 6a61 7661 2f69 6f2f 5072 696e 7453 7472 6561 6d   //java/io/PrintStream</span>
<span class="token comment">#31 	01  	0005 7072 696e 74    //print</span>
<span class="token comment">#32 	01  	0015 284c 6a61 7661 2f6c 616e 672f 5374 7269 6e67 3b29 5600 //(Ljava/lang/String;)V</span>


<span class="token number">21</span> 0002 0008 0000
0001 0009 0009 000a 0000 0002 0001 000b
000c 0001 000d 0000 001d 0001 0001 0000
0005 2ab7 0001 b100 0000 0100 0e00 0000
0600 0100 0000 0100 0900 0f00 0c00 0100
0d00 0000 3b00 0200 0100 0000 17bb 0002
59b7 0003 4b12 04b3 0005 b200 06b2 0005
b600 07b1 0000 0001 000e 0000 0012 0004
0000 0004 0008 0005 000d 0006 0016 0007
0001 0010 0000 0002 0011 
</code></pre></div><p>注意： <code>CONSTANT_Utf8_info</code>后面两个字节是编码字符串的长度，所以 <code>CONSTANT_Utf8_info</code> 型常量的最大长度也就是 Java 中方法、字段名的最大长度，即 <code>u2</code> 的 65535，也就是说最大 65535 字节，即 64KB。</p> <p>字节码的目的</p> <p>一次编写， 到处运行， 与平台无关</p> <h3 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h3> <p><a href="%5Bhttps://greenhathg.github.io/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/%5D(https://greenhathg.github.io/2019/06/26/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AC%94%E8%AE%B0-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E9%87%8F%E6%B1%A0/)">Java虚拟机笔记-字节码文件中的常量池</a></p> <p>https://zhuanlan.zhihu.com/p/99899962</p> <p><a href="https://tech.meituan.com/2019/09/05/java-bytecode-enhancement.html" target="_blank" rel="noopener noreferrer">字节码增强技术探索<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>]</p></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8725beb4.js" defer></script><script src="/assets/js/3.aedd7e52.js" defer></script><script src="/assets/js/23.b9d1dc53.js" defer></script>
  </body>
</html>
