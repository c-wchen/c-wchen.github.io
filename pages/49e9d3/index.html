<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GDB调试指南 | wchen</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon32.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="record wchen life">
    
    <link rel="preload" href="/assets/css/0.styles.1b049d26.css" as="style"><link rel="preload" href="/assets/js/app.8725beb4.js" as="script"><link rel="preload" href="/assets/js/3.aedd7e52.js" as="script"><link rel="preload" href="/assets/js/43.3a538c76.js" as="script"><link rel="prefetch" href="/assets/js/10.0c89a17c.js"><link rel="prefetch" href="/assets/js/100.22e21bad.js"><link rel="prefetch" href="/assets/js/101.b1169e57.js"><link rel="prefetch" href="/assets/js/102.90fd103e.js"><link rel="prefetch" href="/assets/js/103.14e89f5b.js"><link rel="prefetch" href="/assets/js/104.06fc5cca.js"><link rel="prefetch" href="/assets/js/105.8f69f715.js"><link rel="prefetch" href="/assets/js/106.d8c27197.js"><link rel="prefetch" href="/assets/js/107.b7d9f2cb.js"><link rel="prefetch" href="/assets/js/108.c49c77b1.js"><link rel="prefetch" href="/assets/js/109.9a1afbcb.js"><link rel="prefetch" href="/assets/js/11.88339590.js"><link rel="prefetch" href="/assets/js/110.b30e3a13.js"><link rel="prefetch" href="/assets/js/111.5d2cf182.js"><link rel="prefetch" href="/assets/js/112.9538f788.js"><link rel="prefetch" href="/assets/js/113.14a4e516.js"><link rel="prefetch" href="/assets/js/114.ab126092.js"><link rel="prefetch" href="/assets/js/115.be4bb57a.js"><link rel="prefetch" href="/assets/js/116.8dbb3f7b.js"><link rel="prefetch" href="/assets/js/117.61931609.js"><link rel="prefetch" href="/assets/js/118.85d90fa0.js"><link rel="prefetch" href="/assets/js/119.7a0561c5.js"><link rel="prefetch" href="/assets/js/12.0e4adb62.js"><link rel="prefetch" href="/assets/js/120.b92e0bc3.js"><link rel="prefetch" href="/assets/js/121.fc43e8ef.js"><link rel="prefetch" href="/assets/js/122.d7b06645.js"><link rel="prefetch" href="/assets/js/123.43ddeb68.js"><link rel="prefetch" href="/assets/js/124.f5a25533.js"><link rel="prefetch" href="/assets/js/125.d6917ebb.js"><link rel="prefetch" href="/assets/js/126.87e25558.js"><link rel="prefetch" href="/assets/js/127.d93c3bd6.js"><link rel="prefetch" href="/assets/js/128.cd9c0723.js"><link rel="prefetch" href="/assets/js/129.4bf55679.js"><link rel="prefetch" href="/assets/js/13.cb32d651.js"><link rel="prefetch" href="/assets/js/130.80b8ac9f.js"><link rel="prefetch" href="/assets/js/131.0a13ecc2.js"><link rel="prefetch" href="/assets/js/132.cec6971c.js"><link rel="prefetch" href="/assets/js/133.4de9fe57.js"><link rel="prefetch" href="/assets/js/134.d064d2f1.js"><link rel="prefetch" href="/assets/js/135.4cbf9da8.js"><link rel="prefetch" href="/assets/js/136.2519514e.js"><link rel="prefetch" href="/assets/js/137.5c285a55.js"><link rel="prefetch" href="/assets/js/138.b5c8fa36.js"><link rel="prefetch" href="/assets/js/139.28679ddc.js"><link rel="prefetch" href="/assets/js/14.5290b05d.js"><link rel="prefetch" href="/assets/js/140.85bde7a0.js"><link rel="prefetch" href="/assets/js/141.aeb8f686.js"><link rel="prefetch" href="/assets/js/142.0e821bf5.js"><link rel="prefetch" href="/assets/js/143.bea7f5c7.js"><link rel="prefetch" href="/assets/js/144.c23cb250.js"><link rel="prefetch" href="/assets/js/145.df7c1e3e.js"><link rel="prefetch" href="/assets/js/146.5180b016.js"><link rel="prefetch" href="/assets/js/147.2a32ede1.js"><link rel="prefetch" href="/assets/js/148.62832aa8.js"><link rel="prefetch" href="/assets/js/149.cdd397e9.js"><link rel="prefetch" href="/assets/js/15.376e4dca.js"><link rel="prefetch" href="/assets/js/150.591bc885.js"><link rel="prefetch" href="/assets/js/151.4bfbd80d.js"><link rel="prefetch" href="/assets/js/152.ed8603a3.js"><link rel="prefetch" href="/assets/js/153.541b2013.js"><link rel="prefetch" href="/assets/js/154.b4f1a312.js"><link rel="prefetch" href="/assets/js/155.d20dc730.js"><link rel="prefetch" href="/assets/js/156.0db8687c.js"><link rel="prefetch" href="/assets/js/157.68037974.js"><link rel="prefetch" href="/assets/js/158.29f9cfec.js"><link rel="prefetch" href="/assets/js/159.c318c6c0.js"><link rel="prefetch" href="/assets/js/16.e6fd44a3.js"><link rel="prefetch" href="/assets/js/160.5b6bb350.js"><link rel="prefetch" href="/assets/js/161.8a804971.js"><link rel="prefetch" href="/assets/js/162.2e1df994.js"><link rel="prefetch" href="/assets/js/163.87a2b4b7.js"><link rel="prefetch" href="/assets/js/164.f8c7dc6a.js"><link rel="prefetch" href="/assets/js/165.f8d8f2ee.js"><link rel="prefetch" href="/assets/js/166.ea9c7e6b.js"><link rel="prefetch" href="/assets/js/167.8a5394d8.js"><link rel="prefetch" href="/assets/js/168.44858922.js"><link rel="prefetch" href="/assets/js/169.7a4c83f9.js"><link rel="prefetch" href="/assets/js/17.8b54be9f.js"><link rel="prefetch" href="/assets/js/170.08fdf9e1.js"><link rel="prefetch" href="/assets/js/171.c3706a48.js"><link rel="prefetch" href="/assets/js/172.4a59fe97.js"><link rel="prefetch" href="/assets/js/173.18b82370.js"><link rel="prefetch" href="/assets/js/174.9d674ed8.js"><link rel="prefetch" href="/assets/js/175.cc6ad8f7.js"><link rel="prefetch" href="/assets/js/176.4794a561.js"><link rel="prefetch" href="/assets/js/177.0dc3d05a.js"><link rel="prefetch" href="/assets/js/178.88084643.js"><link rel="prefetch" href="/assets/js/179.c44b918c.js"><link rel="prefetch" href="/assets/js/18.92f98bc1.js"><link rel="prefetch" href="/assets/js/180.7d19ae5a.js"><link rel="prefetch" href="/assets/js/181.a204908e.js"><link rel="prefetch" href="/assets/js/182.5db8323f.js"><link rel="prefetch" href="/assets/js/183.fbedeba3.js"><link rel="prefetch" href="/assets/js/184.df5c0632.js"><link rel="prefetch" href="/assets/js/185.978c670d.js"><link rel="prefetch" href="/assets/js/186.98f653b8.js"><link rel="prefetch" href="/assets/js/187.b2fe7440.js"><link rel="prefetch" href="/assets/js/188.5c4b8dea.js"><link rel="prefetch" href="/assets/js/189.1628eee4.js"><link rel="prefetch" href="/assets/js/19.25548c65.js"><link rel="prefetch" href="/assets/js/190.75dac6e5.js"><link rel="prefetch" href="/assets/js/191.e5701c49.js"><link rel="prefetch" href="/assets/js/192.bb4edece.js"><link rel="prefetch" href="/assets/js/193.1899fbaa.js"><link rel="prefetch" href="/assets/js/194.49d5dabc.js"><link rel="prefetch" href="/assets/js/195.a4cdc959.js"><link rel="prefetch" href="/assets/js/196.f068ee8d.js"><link rel="prefetch" href="/assets/js/197.692fe19f.js"><link rel="prefetch" href="/assets/js/198.d4131506.js"><link rel="prefetch" href="/assets/js/199.57d7a3e3.js"><link rel="prefetch" href="/assets/js/2.666a315c.js"><link rel="prefetch" href="/assets/js/20.773677e4.js"><link rel="prefetch" href="/assets/js/200.23cc8cf1.js"><link rel="prefetch" href="/assets/js/201.cec5b858.js"><link rel="prefetch" href="/assets/js/202.4414fac2.js"><link rel="prefetch" href="/assets/js/21.eebcf8a1.js"><link rel="prefetch" href="/assets/js/22.ab9c1367.js"><link rel="prefetch" href="/assets/js/23.b9d1dc53.js"><link rel="prefetch" href="/assets/js/24.4b69923e.js"><link rel="prefetch" href="/assets/js/25.a2fe8495.js"><link rel="prefetch" href="/assets/js/26.12dcf15f.js"><link rel="prefetch" href="/assets/js/27.50073f77.js"><link rel="prefetch" href="/assets/js/28.6c68578f.js"><link rel="prefetch" href="/assets/js/29.6a0419af.js"><link rel="prefetch" href="/assets/js/30.8ed6c08d.js"><link rel="prefetch" href="/assets/js/31.301bd566.js"><link rel="prefetch" href="/assets/js/32.851bfc08.js"><link rel="prefetch" href="/assets/js/33.5d350a8c.js"><link rel="prefetch" href="/assets/js/34.ca33f595.js"><link rel="prefetch" href="/assets/js/35.983ed47a.js"><link rel="prefetch" href="/assets/js/36.9b868e72.js"><link rel="prefetch" href="/assets/js/37.449945ce.js"><link rel="prefetch" href="/assets/js/38.ef4a02f1.js"><link rel="prefetch" href="/assets/js/39.ef74d5c7.js"><link rel="prefetch" href="/assets/js/4.017bf609.js"><link rel="prefetch" href="/assets/js/40.1efa2972.js"><link rel="prefetch" href="/assets/js/41.4c4e85b4.js"><link rel="prefetch" href="/assets/js/42.8eb9f6c6.js"><link rel="prefetch" href="/assets/js/44.ac957ce4.js"><link rel="prefetch" href="/assets/js/45.20df3feb.js"><link rel="prefetch" href="/assets/js/46.104c8407.js"><link rel="prefetch" href="/assets/js/47.ed9bd1f1.js"><link rel="prefetch" href="/assets/js/48.d6e9908f.js"><link rel="prefetch" href="/assets/js/49.acd27e73.js"><link rel="prefetch" href="/assets/js/5.ef717c93.js"><link rel="prefetch" href="/assets/js/50.f6436ebc.js"><link rel="prefetch" href="/assets/js/51.4482ba40.js"><link rel="prefetch" href="/assets/js/52.15810626.js"><link rel="prefetch" href="/assets/js/53.8cc86e5d.js"><link rel="prefetch" href="/assets/js/54.fcf6b400.js"><link rel="prefetch" href="/assets/js/55.cf5d0b5a.js"><link rel="prefetch" href="/assets/js/56.d21b4a30.js"><link rel="prefetch" href="/assets/js/57.09227c2a.js"><link rel="prefetch" href="/assets/js/58.fe436573.js"><link rel="prefetch" href="/assets/js/59.016fbcaf.js"><link rel="prefetch" href="/assets/js/6.96ee5f57.js"><link rel="prefetch" href="/assets/js/60.c06293ac.js"><link rel="prefetch" href="/assets/js/61.b4e4006c.js"><link rel="prefetch" href="/assets/js/62.f5a124d5.js"><link rel="prefetch" href="/assets/js/63.2f0bed93.js"><link rel="prefetch" href="/assets/js/64.392c4569.js"><link rel="prefetch" href="/assets/js/65.7461790c.js"><link rel="prefetch" href="/assets/js/66.467fe75c.js"><link rel="prefetch" href="/assets/js/67.7472ff41.js"><link rel="prefetch" href="/assets/js/68.cfff64e0.js"><link rel="prefetch" href="/assets/js/69.92e93051.js"><link rel="prefetch" href="/assets/js/7.e6472673.js"><link rel="prefetch" href="/assets/js/70.63ff8004.js"><link rel="prefetch" href="/assets/js/71.2cc00e12.js"><link rel="prefetch" href="/assets/js/72.860d4af9.js"><link rel="prefetch" href="/assets/js/73.9d0bd3ea.js"><link rel="prefetch" href="/assets/js/74.237893f9.js"><link rel="prefetch" href="/assets/js/75.2f7650a9.js"><link rel="prefetch" href="/assets/js/76.19d4c2c8.js"><link rel="prefetch" href="/assets/js/77.f78144da.js"><link rel="prefetch" href="/assets/js/78.e0f85041.js"><link rel="prefetch" href="/assets/js/79.f1f92723.js"><link rel="prefetch" href="/assets/js/8.a8081b4b.js"><link rel="prefetch" href="/assets/js/80.9bf52d8e.js"><link rel="prefetch" href="/assets/js/81.4d3ab7cf.js"><link rel="prefetch" href="/assets/js/82.0370835e.js"><link rel="prefetch" href="/assets/js/83.0ed1bb1f.js"><link rel="prefetch" href="/assets/js/84.cc2f8d66.js"><link rel="prefetch" href="/assets/js/85.75d5f5b3.js"><link rel="prefetch" href="/assets/js/86.65af641f.js"><link rel="prefetch" href="/assets/js/87.15f2ea85.js"><link rel="prefetch" href="/assets/js/88.e59ddda6.js"><link rel="prefetch" href="/assets/js/89.a05edea4.js"><link rel="prefetch" href="/assets/js/9.c9619e92.js"><link rel="prefetch" href="/assets/js/90.441e1039.js"><link rel="prefetch" href="/assets/js/91.8adf4b04.js"><link rel="prefetch" href="/assets/js/92.46ae5eb4.js"><link rel="prefetch" href="/assets/js/93.c1c42ffc.js"><link rel="prefetch" href="/assets/js/94.1de7aab9.js"><link rel="prefetch" href="/assets/js/95.54f28122.js"><link rel="prefetch" href="/assets/js/96.a9b78971.js"><link rel="prefetch" href="/assets/js/97.4c1f5ec9.js"><link rel="prefetch" href="/assets/js/98.6c42b155.js"><link rel="prefetch" href="/assets/js/99.cddae8d9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1b049d26.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="app"><div class="header" data-v-42c3136f><span class="logo" data-v-42c3136f>wchen</span> <div class="search-box" data-v-42c3136f><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="main"><div class="sidebar" data-v-3ad4446e><ul class="sub-1" data-v-3ad4446e><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                C
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                Git
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                algorithm
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                backend
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                linux
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                network
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                python
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                storage
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                tools
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                web
            </span> <!----></li><li data-v-3ad4446e><span data-v-3ad4446e><i class="iconfont" data-v-3ad4446e></i>
                README.md
            </span> <!----></li></ul></div> <div class="content__default"><h2 id="如何开始"><a href="#如何开始" class="header-anchor">#</a> 如何开始？</h2> <ol><li>测试程序firstprog.c</li></ol> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><ol start="2"><li><p>编译和调试</p> <ul><li><p>gcc -g -o firstprog firstprog.c</p></li> <li><p>gdb -q firstprog</p></li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> wchen@wchen:~/workspace$ gcc -g -o firstprog firstprog.c
<span class="token punctuation">(</span>base<span class="token punctuation">)</span> wchen@wchen:~/workspace$ gdb -q firstprog
/home/wchen/.gdbinit:1: Error <span class="token keyword">in</span> sourced <span class="token builtin class-name">command</span> file:
Ambiguous <span class="token builtin class-name">set</span> <span class="token builtin class-name">command</span> <span class="token string">&quot;dis intel&quot;</span><span class="token builtin class-name">:</span> disable-randomization, disassemble-next-line, disassembler-options, disassembly-flavor<span class="token punctuation">..</span>.
Reading symbols from firstprog<span class="token punctuation">..</span>.
warning: File <span class="token string">&quot;/home/wchen/workspace/.gdbinit&quot;</span> auto-loading has been declined by your `auto-load safe-path' <span class="token builtin class-name">set</span> to <span class="token string">&quot;<span class="token variable">$debugdir</span>:<span class="token variable">$datadir</span>/auto-load&quot;</span><span class="token builtin class-name">.</span>
To <span class="token builtin class-name">enable</span> execution of this <span class="token function">file</span> <span class="token function">add</span>
	add-auto-load-safe-path /home/wchen/workspace/.gdbinit
line to your configuration <span class="token function">file</span> <span class="token string">&quot;/home/wchen/.gdbinit&quot;</span><span class="token builtin class-name">.</span>
To completely disable this security protection <span class="token function">add</span>
	<span class="token builtin class-name">set</span> auto-load safe-path /
line to your configuration <span class="token function">file</span> <span class="token string">&quot;/home/wchen/.gdbinit&quot;</span><span class="token builtin class-name">.</span>
For <span class="token function">more</span> information about this security protection see the
<span class="token string">&quot;Auto-loading safe path&quot;</span> section <span class="token keyword">in</span> the GDB manual.  E.g., run from the shell:
	info <span class="token string">&quot;(gdb)Auto-loading safe path&quot;</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> list
<span class="token number">1</span>	<span class="token comment">#include &lt;stdio.h&gt;</span>
<span class="token number">2</span>
<span class="token number">3</span>	int main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">4</span>	<span class="token punctuation">{</span>
<span class="token number">5</span>	    int i<span class="token punctuation">;</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token number">7</span>	    <span class="token punctuation">{</span>
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">9</span>	    <span class="token punctuation">}</span>
<span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">11</span>	<span class="token punctuation">}</span>

</code></pre></div><ol start="3"><li>帮助命令</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">help</span> step
Step program <span class="token keyword">until</span> it reaches a different <span class="token builtin class-name">source</span> line.
Usage: step <span class="token punctuation">[</span>N<span class="token punctuation">]</span>
Argument N means step N <span class="token builtin class-name">times</span> <span class="token punctuation">(</span>or till program stops <span class="token keyword">for</span> another reason<span class="token punctuation">)</span>.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">help</span> next
Step program, proceeding through subroutine calls.
Usage: next <span class="token punctuation">[</span>N<span class="token punctuation">]</span>
Unlike <span class="token string">&quot;step&quot;</span>, <span class="token keyword">if</span> the current <span class="token builtin class-name">source</span> line calls a subroutine,
this <span class="token builtin class-name">command</span> does not enter the subroutine, but instead steps over
the call, <span class="token keyword">in</span> effect treating it as a single <span class="token builtin class-name">source</span> line.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>
</code></pre></div><h2 id="常用gdb调试命令"><a href="#常用gdb调试命令" class="header-anchor">#</a> 常用GDB调试命令</h2> <ol><li>运行程序
<ul><li>run [arglist]: 直接运行程序，暂停到断点处；无断点，执行运行整个程序</li> <li>start:暂停到程序入口（main）</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> run
Starting program: /home/wchen/workspace/firstprog
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
<span class="token punctuation">[</span>Inferior <span class="token number">1</span> <span class="token punctuation">(</span>process <span class="token number">9027</span><span class="token punctuation">)</span> exited normally<span class="token punctuation">]</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> start
Temporary breakpoint <span class="token number">2</span> at 0x555555554642: <span class="token function">file</span> firstprog.c, line <span class="token number">6</span>.
Starting program: /home/wchen/workspace/firstprog

Temporary breakpoint <span class="token number">2</span>, main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:6
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>

</code></pre></div><ol start="2"><li><p>单步调试、单步跳入、执行到下一个断点</p> <ul><li>next/n</li> <li>step/s</li> <li>continue</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> start
The program being debugged has been started already.
Start it from the beginning? <span class="token punctuation">(</span>y or n<span class="token punctuation">)</span> y
Temporary breakpoint <span class="token number">3</span> at 0x555555554642: <span class="token function">file</span> firstprog.c, line <span class="token number">6</span>.
Starting program: /home/wchen/workspace/firstprog

Temporary breakpoint <span class="token number">3</span>, main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:6
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> n
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> step-mode on
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> s
0x00007ffff7a62aa0 <span class="token keyword">in</span> puts <span class="token punctuation">(</span><span class="token punctuation">)</span> from /lib/x86_64-linux-gnu/libc.so.6
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> bt
<span class="token comment">#0  0x00007ffff7a62aa0 in puts () from /lib/x86_64-linux-gnu/libc.so.6</span>
<span class="token comment">#1  0x0000555555554657 in main () at firstprog.c:8</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> b <span class="token number">10</span>
Breakpoint <span class="token number">4</span> at 0x555555554661: <span class="token function">file</span> firstprog.c, line <span class="token number">10</span>.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> c
Continuing.
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>

Breakpoint <span class="token number">4</span>, main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:10
<span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li><p>添加、删除和禁用断点</p> <ul><li>break/b [*addr][function][if expr][num]</li> <li>delete num</li> <li>disable num</li> <li>enable num</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> list <span class="token number">0</span>
<span class="token number">1</span>	<span class="token comment">#include &lt;stdio.h&gt;</span>
<span class="token number">2</span>
<span class="token number">3</span>	int main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">4</span>	<span class="token punctuation">{</span>
<span class="token number">5</span>	    int i<span class="token punctuation">;</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token number">7</span>	    <span class="token punctuation">{</span>
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">9</span>	    <span class="token punctuation">}</span>
<span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">11</span>	<span class="token punctuation">}</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> b <span class="token number">6</span>
Breakpoint <span class="token number">5</span> at 0x555555554642: <span class="token function">file</span> firstprog.c, line <span class="token number">6</span>.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> info breakpoints
Num     Type           Disp Enb Address            What
<span class="token number">4</span>       breakpoint     keep y   0x0000555555554661 <span class="token keyword">in</span> main at firstprog.c:10
	breakpoint already hit <span class="token number">1</span> <span class="token function">time</span>
<span class="token number">5</span>       breakpoint     keep y   0x0000555555554642 <span class="token keyword">in</span> main at firstprog.c:6
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> delete <span class="token number">4</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> disable <span class="token number">5</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> info b
Num     Type           Disp Enb Address            What
<span class="token number">5</span>       breakpoint     keep n   0x0000555555554642 <span class="token keyword">in</span> main at firstprog.c:6
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>

</code></pre></div><ol start="4"><li>打印变量和类型
<ul><li>p/f  expr [arr@num]: f表示打印数据格式, @后面指定显示数组的个数</li></ul></li></ol> <div class="language-c extra-class"><pre class="language-c"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> start
The program being debugged has been started already<span class="token punctuation">.</span>
Start it from the beginning<span class="token operator">?</span> <span class="token punctuation">(</span>y or n<span class="token punctuation">)</span> y
Temporary breakpoint <span class="token number">7</span> at <span class="token number">0x555555554642</span><span class="token operator">:</span> file firstprog<span class="token punctuation">.</span>c<span class="token punctuation">,</span> line <span class="token number">6.</span>
Starting program<span class="token operator">:</span> <span class="token operator">/</span>home<span class="token operator">/</span>wchen<span class="token operator">/</span>workspace<span class="token operator">/</span>firstprog

Temporary breakpoint <span class="token number">7</span><span class="token punctuation">,</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">6</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> print i
$<span class="token number">3</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> ptype i
type <span class="token operator">=</span> <span class="token keyword">int</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> p<span class="token operator">/</span>d i@<span class="token number">10</span>
$<span class="token number">2</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1431651952</span><span class="token punctuation">,</span> <span class="token number">21845</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">140493833</span><span class="token punctuation">,</span> <span class="token number">32767</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">7816</span><span class="token punctuation">,</span> <span class="token number">32767</span><span class="token punctuation">,</span> <span class="token number">32768</span><span class="token punctuation">}</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>
</code></pre></div><ol start="5"><li><p>函数返回、循环体退出</p> <ul><li>return: 当前位置直接返回</li> <li>finish：运行完当前函数后返回</li> <li>until：在循环体内执行一次，在暂停位置执行一次（注意循环体内有断点、会在断点处暂停，无法退出）</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> b <span class="token number">8</span>
Breakpoint <span class="token number">2</span> at 0x55555555464b: <span class="token function">file</span> firstprog.c, line <span class="token number">8</span>.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> c
Continuing.

Breakpoint <span class="token number">2</span>, main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:8
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> step
0x00007ffff7a62aa0 <span class="token keyword">in</span> puts <span class="token punctuation">(</span><span class="token punctuation">)</span> from /lib/x86_64-linux-gnu/libc.so.6
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> list
<span class="token number">3</span>	int main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">4</span>	<span class="token punctuation">{</span>
<span class="token number">5</span>	    int i<span class="token punctuation">;</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token number">7</span>	    <span class="token punctuation">{</span>
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">9</span>	    <span class="token punctuation">}</span>
<span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">11</span>	<span class="token punctuation">}</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>
Line number <span class="token number">12</span> out of range<span class="token punctuation">;</span> firstprog.c has <span class="token number">11</span> lines.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> finish
Run till <span class="token builtin class-name">exit</span> from <span class="token comment">#0  0x00007ffff7a62aa0 in puts () from /lib/x86_64-linux-gnu/libc.so.6</span>
Hello World<span class="token operator">!</span>
main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:6
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">return</span>
Make selected stack frame <span class="token builtin class-name">return</span> now? <span class="token punctuation">(</span>y or n<span class="token punctuation">)</span> y
<span class="token comment">#0  main () at firstprog.c:6</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> start
The program being debugged has been started already.
Start it from the beginning? <span class="token punctuation">(</span>y or n<span class="token punctuation">)</span> y
Temporary breakpoint <span class="token number">3</span> at 0x555555554642: <span class="token function">file</span> firstprog.c, line <span class="token number">6</span>.
Starting program: /home/wchen/workspace/firstprog

Temporary breakpoint <span class="token number">3</span>, main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:6
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> n
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token keyword">until</span>
Hello World<span class="token operator">!</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token keyword">until</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
Hello World<span class="token operator">!</span>
<span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li>调用函数
<ul><li>call: 注意有返回值要忽略返回值</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> call <span class="token punctuation">(</span>void<span class="token punctuation">)</span>printf<span class="token punctuation">(</span><span class="token string">&quot;hello<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span>
hello
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>
</code></pre></div><ol start="7"><li>查看内存
<ul><li>x/nfu expr</li> <li>display/f expr: 程序暂停时显示</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>参数 n 为正整数，表示显示内存长度
参数 f 的可选值：
x 按十六进制格式显示变量。
d 按十进制格式显示变量。
u 按十六进制格式显示无符号整型。
o 按八进制格式显示变量。
t 按二进制格式显示变量。
a 按十六进制格式显示变量。
c 按字符格式显示变量。
f 按浮点数格式显示变量。
 
参数 u 的可选值：
b 表示单字节
h 表示双字节
w 表示四字节
g 表示八字节
</code></pre></div><ol start="8"><li>查看源码
<ul><li>list start,end</li> <li>list function</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> listsize <span class="token number">1000</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> list main
<span class="token number">1</span>	<span class="token comment">#include &lt;stdio.h&gt;</span>
<span class="token number">2</span>
<span class="token number">3</span>	int main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">4</span>	<span class="token punctuation">{</span>
<span class="token number">5</span>	    int i<span class="token punctuation">;</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token number">7</span>	    <span class="token punctuation">{</span>
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">9</span>	    <span class="token punctuation">}</span>
<span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token number">11</span>	<span class="token punctuation">}</span>
</code></pre></div><ol start="9"><li><p>执行shell命令</p> <ul><li>shell cmd</li></ul></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> shell <span class="token function">cat</span> -n firstprog.c
     <span class="token number">1</span>	<span class="token comment">#include &lt;stdio.h&gt;</span>
     <span class="token number">2</span>
     <span class="token number">3</span>	int main<span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token number">4</span>	<span class="token punctuation">{</span>
     <span class="token number">5</span>	    int i<span class="token punctuation">;</span>
     <span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
     <span class="token number">7</span>	    <span class="token punctuation">{</span>
     <span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token number">9</span>	    <span class="token punctuation">}</span>
    <span class="token number">10</span>	    <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token number">11</span>	<span class="token punctuation">}</span>
</code></pre></div><ol start="10"><li>观察点</li></ol> <ul><li>watch expr:  expr变动时触发, 停住程序</li> <li>rewatch expr:  当表达式（变量）expr被读时，停住程序</li> <li>awatch expr: 当表达式（变量）的值被读或被写时，停住程序</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token function">watch</span> i
Hardware watchpoint <span class="token number">5</span>: i
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> n
<span class="token number">8</span>	        printf<span class="token punctuation">(</span><span class="token string">&quot;Hello World!<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>: i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> n
Hello World<span class="token operator">!</span>
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token number">1</span>: i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> n

Hardware watchpoint <span class="token number">5</span>: i

Old value <span class="token operator">=</span> <span class="token number">0</span>
New value <span class="token operator">=</span> <span class="token number">1</span>
0x000055555555465b <span class="token keyword">in</span> main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:6
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token number">1</span>: i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>
</code></pre></div><h2 id="设置命令"><a href="#设置命令" class="header-anchor">#</a> 设置命令</h2> <p>汇编语法</p> <div class="language-c extra-class"><pre class="language-c"><code>set disassembly<span class="token operator">-</span>flavor intel    #intel
set disassembly<span class="token operator">-</span>flavor att      #AT<span class="token operator">&amp;</span>T
</code></pre></div><p>显示汇编下一行</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">set</span> disassemble-next-line on
</code></pre></div><p>不暂停输出</p> <div class="language-c extra-class"><pre class="language-c"><code>set height <span class="token number">0</span>
set pagination off
</code></pre></div><p>开启日志功能</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">set</span> logging on
</code></pre></div><p>进入不带调试信息的函数</p> <div class="language-c extra-class"><pre class="language-c"><code>set step<span class="token operator">-</span>mode on
</code></pre></div><p>设置变量值</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>set var i <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> p <span class="token operator">&amp;</span>i
<span class="token variable">$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>int *<span class="token punctuation">)</span> 0x7fffffffe09c
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> *<span class="token punctuation">(</span>int *<span class="token punctuation">)</span>0x7fffffffe09c <span class="token operator">=</span> <span class="token number">10</span>
</code></pre></div><p>命令行参数</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> args <span class="token builtin class-name">test</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> show args
Argument list to give program being debugged when it is started is <span class="token string">&quot;test&quot;</span>xxxxxxxxxx <span class="token builtin class-name">set</span> args <span class="token string">&quot;test&quot;</span><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> args test<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> show argsArgument list to give program being debugged when it is started is <span class="token string">&quot;test&quot;</span><span class="token builtin class-name">.</span>

<span class="token comment">## 其他方法</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> run test1
The program being debugged has been started already.
Start it from the beginning? <span class="token punctuation">(</span>y or n<span class="token punctuation">)</span> y
Starting program: /home/wchen/workspace/firstprog test1

Breakpoint <span class="token number">3</span>, main <span class="token punctuation">(</span><span class="token punctuation">)</span> at firstprog.c:6
<span class="token number">6</span>	    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> show args
Argument list to give program being debugged when it is started is <span class="token string">&quot;test1&quot;</span><span class="token builtin class-name">.</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span>
</code></pre></div><p>一次性显示代码行数</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">set</span> listsize <span class="token number">1000</span>
</code></pre></div><h2 id="info命令"><a href="#info命令" class="header-anchor">#</a> INFO命令</h2> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">简写</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">info breakpoints</td> <td style="text-align:left;"></td> <td style="text-align:left;">查看断点,可以后接参数n表示查看某个断点号</td></tr> <tr><td style="text-align:left;">info watchpoints</td> <td style="text-align:left;"></td> <td style="text-align:left;">列出当前所设置了的所有观察点</td></tr> <tr><td style="text-align:left;">info args</td> <td style="text-align:left;"></td> <td style="text-align:left;">打印出当前函数的参数名及其值</td></tr> <tr><td style="text-align:left;">info locals</td> <td style="text-align:left;"></td> <td style="text-align:left;">打印出当前函数中所有局部变量及其值</td></tr> <tr><td style="text-align:left;">info frame</td> <td style="text-align:left;">info f</td> <td style="text-align:left;">打印出更为详细的当前栈层的信息，只不过，大多数都是运行时的内存地址, 如函数地址，调用函数的地址，被调用函数的地址。</td></tr> <tr><td style="text-align:left;">info signals</td> <td style="text-align:left;"></td> <td style="text-align:left;">打印信号信息</td></tr> <tr><td style="text-align:left;">info handle</td> <td style="text-align:left;"></td> <td style="text-align:left;">查看有哪些信号在被GDB检测中</td></tr> <tr><td style="text-align:left;">info threads</td> <td style="text-align:left;"></td> <td style="text-align:left;">查看GDB为程序分配的线程号</td></tr> <tr><td style="text-align:left;">info display</td> <td style="text-align:left;"></td> <td style="text-align:left;">查看display设置的自动显示的信息</td></tr> <tr><td style="text-align:left;">info program</td> <td style="text-align:left;"></td> <td style="text-align:left;">当进程被gdb停住时，使用该命令查看程序的是否在运行、进程号和被暂停的原因</td></tr> <tr><td style="text-align:left;">info symbol</td> <td style="text-align:left;"></td> <td style="text-align:left;">查看地址对饮的符号</td></tr></tbody></table> <h2 id="栈帧"><a href="#栈帧" class="header-anchor">#</a> 栈帧</h2> <p>// TODO：</p> <p><img src="https://pic4.zhimg.com/80/v2-039d97b92f66e84801938c0e4b63e7cf_720w.png" alt="img"></p> <p>info frame [num]： 显示当前栈帧</p> <p>frame num: 切换栈帧</p> <p>bt full: 显示全部栈帧</p> <p><a href="https://blog.csdn.net/lqt641/article/details/73002566" target="_blank" rel="noopener noreferrer">x86-64 下函数调用及栈帧原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="layout分割窗口"><a href="#layout分割窗口" class="header-anchor">#</a> layout分割窗口</h2> <p>layout 用于分割窗口，可以一边查看代码，一边测试。主要有以下几种用法：</p> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>layout src</td> <td>显示源代码窗口</td></tr> <tr><td>layout asm</td> <td>显示汇编窗口</td></tr> <tr><td>layout regs</td> <td>显示源代码/汇编和寄存器窗口</td></tr> <tr><td>layout split</td> <td>显示源代码和汇编窗口</td></tr> <tr><td>layout next</td> <td>显示下一个layout</td></tr> <tr><td>layout prev</td> <td>显示上一个layout</td></tr> <tr><td>Ctrl + l</td> <td>刷新窗口</td></tr> <tr><td>Ctrl + x</td> <td>再按1：单窗口模式，显示一个窗口</td></tr> <tr><td>Ctrl + x</td> <td>再按2：双窗口模式，显示两个窗口</td></tr> <tr><td>Ctrl + x</td> <td>再按a：回到传统模式，即退出layout，回到执行layout之前的调试窗口。</td></tr></tbody></table> <h2 id="寄存器图解"><a href="#寄存器图解" class="header-anchor">#</a> 寄存器图解</h2> <ul><li>info registers/i r</li> <li>info all-registers</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> i r
rax            0xd                 <span class="token number">13</span>
rbx            0x0                 <span class="token number">0</span>
rcx            0x7ffff7af2224      <span class="token number">140737348837924</span>
rdx            0x7ffff7dcf8c0      <span class="token number">140737351841984</span>
rsi            0x555555756260      <span class="token number">93824994337376</span>
rdi            0x1                 <span class="token number">1</span>
rbp            0x7fffffffe0a0      0x7fffffffe0a0
rsp            0x7fffffffe090      0x7fffffffe090
r8             0x7ffff7fda4c0      <span class="token number">140737353983168</span>
r9             0x0                 <span class="token number">0</span>
r10            0x555555756010      <span class="token number">93824994336784</span>
r11            0x246               <span class="token number">582</span>
r12            0x555555554530      <span class="token number">93824992232752</span>
r13            0x7fffffffe180      <span class="token number">140737488347520</span>
r14            0x0                 <span class="token number">0</span>
r15            0x0                 <span class="token number">0</span>
rip            0x555555554661      0x555555554661 <span class="token operator">&lt;</span>main+3<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
eflags         0x202               <span class="token punctuation">[</span> IF <span class="token punctuation">]</span>
cs             0x33                <span class="token number">51</span>
ss             0x2b                <span class="token number">43</span>
ds             0x0                 <span class="token number">0</span>
es             0x0                 <span class="token number">0</span>
fs             0x0                 <span class="token number">0</span>
gs             0x0                 <span class="token number">0</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> i all-registers
rax            0xd                 <span class="token number">13</span>
rbx            0x0                 <span class="token number">0</span>
rcx            0x7ffff7af2224      <span class="token number">140737348837924</span>
rdx            0x7ffff7dcf8c0      <span class="token number">140737351841984</span>
rsi            0x555555756260      <span class="token number">93824994337376</span>
rdi            0x1                 <span class="token number">1</span>
rbp            0x7fffffffe0a0      0x7fffffffe0a0
rsp            0x7fffffffe090      0x7fffffffe090
r8             0x7ffff7fda4c0      <span class="token number">140737353983168</span>
r9             0x0                 <span class="token number">0</span>
<span class="token punctuation">..</span>.
</code></pre></div><p><img src="/assets/img/image-20220329003719717.5098c99a.png" alt="image-20220329003719717"></p> <ul><li><p>%rax 作为函数返回值使用。</p></li> <li><p>%rsp 栈指针寄存器，指向栈顶</p></li> <li><p>%rbp 堆栈基指针</p></li> <li><p>%rdi，%rsi，%rdx，%rcx，%r8，%r9 用作函数参数，依次对应第1参数，第2参数。。。</p></li> <li><p>%rbx，%rbp，%r12，%r13，%14，%15 用作数据存储，遵循被调用者使用规则，简单说就是随便用，调用子函数之前要备份它，以防他被修改</p></li> <li><p>%r10，%r11 用作数据存储，遵循调用者使用规则，简单说就是使用之前要先保存原值</p></li></ul> <h2 id="调试coredump"><a href="#调试coredump" class="header-anchor">#</a> 调试coredump</h2> <p>开启资源限制</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> wchen@wchen<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>workspace$ ulimit <span class="token operator">-</span>a
core file <span class="token function">size</span>          <span class="token punctuation">(</span>blocks<span class="token punctuation">,</span> <span class="token operator">-</span>c<span class="token punctuation">)</span> <span class="token number">0</span>           # 限制生成core文件的大小
data seg <span class="token function">size</span>           <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>d<span class="token punctuation">)</span> unlimited
scheduling <span class="token function">priority</span>             <span class="token punctuation">(</span><span class="token operator">-</span>e<span class="token punctuation">)</span> <span class="token number">0</span>
file <span class="token function">size</span>               <span class="token punctuation">(</span>blocks<span class="token punctuation">,</span> <span class="token operator">-</span>f<span class="token punctuation">)</span> unlimited
pending <span class="token function">signals</span>                 <span class="token punctuation">(</span><span class="token operator">-</span>i<span class="token punctuation">)</span> <span class="token number">46533</span>
max locked <span class="token function">memory</span>       <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>l<span class="token punctuation">)</span> <span class="token number">65536</span>
max memory <span class="token function">size</span>         <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>m<span class="token punctuation">)</span> unlimited
open <span class="token function">files</span>                      <span class="token punctuation">(</span><span class="token operator">-</span>n<span class="token punctuation">)</span> <span class="token number">1024</span>
pipe <span class="token function">size</span>            <span class="token punctuation">(</span><span class="token number">512</span> bytes<span class="token punctuation">,</span> <span class="token operator">-</span>p<span class="token punctuation">)</span> <span class="token number">8</span>
POSIX message <span class="token function">queues</span>     <span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token operator">-</span>q<span class="token punctuation">)</span> <span class="token number">819200</span>
real<span class="token operator">-</span>time <span class="token function">priority</span>              <span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">)</span> <span class="token number">0</span>
stack <span class="token function">size</span>              <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>s<span class="token punctuation">)</span> <span class="token number">8192</span>
cpu <span class="token function">time</span>               <span class="token punctuation">(</span>seconds<span class="token punctuation">,</span> <span class="token operator">-</span>t<span class="token punctuation">)</span> unlimited
max user <span class="token function">processes</span>              <span class="token punctuation">(</span><span class="token operator">-</span>u<span class="token punctuation">)</span> <span class="token number">46533</span>
virtual <span class="token function">memory</span>          <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>v<span class="token punctuation">)</span> unlimited
file <span class="token function">locks</span>                      <span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span> unlimited

## 关闭资源限制
<span class="token punctuation">(</span>base<span class="token punctuation">)</span> wchen@wchen<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>workspace$ ulimit <span class="token operator">-</span>c <span class="token function">unlimited</span>
<span class="token punctuation">(</span>base<span class="token punctuation">)</span> wchen@wchen<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>workspace$ ulimit <span class="token operator">-</span>a
core file <span class="token function">size</span>          <span class="token punctuation">(</span>blocks<span class="token punctuation">,</span> <span class="token operator">-</span>c<span class="token punctuation">)</span> unlimited
data seg <span class="token function">size</span>           <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>d<span class="token punctuation">)</span> unlimited
scheduling <span class="token function">priority</span>             <span class="token punctuation">(</span><span class="token operator">-</span>e<span class="token punctuation">)</span> <span class="token number">0</span>
file <span class="token function">size</span>               <span class="token punctuation">(</span>blocks<span class="token punctuation">,</span> <span class="token operator">-</span>f<span class="token punctuation">)</span> unlimited
pending <span class="token function">signals</span>                 <span class="token punctuation">(</span><span class="token operator">-</span>i<span class="token punctuation">)</span> <span class="token number">46533</span>
max locked <span class="token function">memory</span>       <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>l<span class="token punctuation">)</span> <span class="token number">65536</span>
max memory <span class="token function">size</span>         <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>m<span class="token punctuation">)</span> unlimited
open <span class="token function">files</span>                      <span class="token punctuation">(</span><span class="token operator">-</span>n<span class="token punctuation">)</span> <span class="token number">1024</span>
pipe <span class="token function">size</span>            <span class="token punctuation">(</span><span class="token number">512</span> bytes<span class="token punctuation">,</span> <span class="token operator">-</span>p<span class="token punctuation">)</span> <span class="token number">8</span>
POSIX message <span class="token function">queues</span>     <span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token operator">-</span>q<span class="token punctuation">)</span> <span class="token number">819200</span>
real<span class="token operator">-</span>time <span class="token function">priority</span>              <span class="token punctuation">(</span><span class="token operator">-</span>r<span class="token punctuation">)</span> <span class="token number">0</span>
stack <span class="token function">size</span>              <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>s<span class="token punctuation">)</span> <span class="token number">8192</span>
cpu <span class="token function">time</span>               <span class="token punctuation">(</span>seconds<span class="token punctuation">,</span> <span class="token operator">-</span>t<span class="token punctuation">)</span> unlimited
max user <span class="token function">processes</span>              <span class="token punctuation">(</span><span class="token operator">-</span>u<span class="token punctuation">)</span> <span class="token number">46533</span>
virtual <span class="token function">memory</span>          <span class="token punctuation">(</span>kbytes<span class="token punctuation">,</span> <span class="token operator">-</span>v<span class="token punctuation">)</span> unlimited
file <span class="token function">locks</span>                      <span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span> unlimited
   
</code></pre></div><p>设置生成格式</p> <div class="language-bash extra-class"><pre class="language-bash"><code>修改文件命令： <span class="token builtin class-name">echo</span> <span class="token string">&quot;/corefile/core-%e-%p-%t&quot;</span> <span class="token operator">&gt;</span> /proc/sys/kernel/core_pattern
或者：
sysctl -w kernel.core_pattern<span class="token operator">=</span>/corefile/core.%e.%p.%s.%E
可以将core文件统一生成到/corefile目录下，产生的文件名为core-命令名-pid-时间戳
以下是参数列表:
%p - insert pid into filename                                  添加pid<span class="token punctuation">(</span>进程id<span class="token punctuation">)</span>
%u - insert current uid into filename                          添加当前uid<span class="token punctuation">(</span>用户id<span class="token punctuation">)</span>
%g - insert current gid into filename                          添加当前gid<span class="token punctuation">(</span>用户组id<span class="token punctuation">)</span>
%s - insert signal that caused the coredump into the filename  添加导致产生core的信号
%t - insert UNIX <span class="token function">time</span> that the coredump occurred into filename 添加core文件生成时的unix时间
%h - insert <span class="token function">hostname</span> where the coredump happened into filename 添加主机名
%e - insert coredumping executable name into filename          添加导致产生core的命令名
</code></pre></div><p>测试程序 test_core.c</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#include &lt;stdio.h&gt;</span>

int <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        int *p <span class="token operator">=</span> NULL<span class="token punctuation">;</span>
        *p <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="调试进程"><a href="#调试进程" class="header-anchor">#</a> 调试进程</h2> <p>// TODO:</p> <p>gdb attach pid</p> <p>gdb program pid</p> <h2 id="调试多线程"><a href="#调试多线程" class="header-anchor">#</a> 调试多线程</h2> <p>// TODO:</p> <p>info threads</p> <p>threads num</p> <h2 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h2> <ol><li>符号查看
<ul><li>nm</li> <li>objdump</li> <li>readelf</li></ul></li> <li>内存地址映射</li> <li>动态链接库问题/静态</li></ol></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8725beb4.js" defer></script><script src="/assets/js/3.aedd7e52.js" defer></script><script src="/assets/js/43.3a538c76.js" defer></script>
  </body>
</html>
